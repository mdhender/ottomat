dev-ottomap.playbymailgames.com {
    encode gzip

    # CORS and preflight
    header Access-Control-Allow-Origin "*"
    header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    header Access-Control-Allow-Headers "Content-Type, Authorization"

    @options method OPTIONS
    respond @options 200

    # reverse proxy
    handle /api/* {
        reverse_proxy http://localhost:8080
    }

    log {
        output file /var/log/caddy/dev-ottomap.log
        format json
    }
}

